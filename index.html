<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <style>

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  </head>
  <body>
    <div class = "container-fluid">
      <div class = "row">
        <div class = "col-lg-12">
          <div id = "feedback"></div><!--end feedback-->
          <div id = "messages"></div><!--end messages-->
          <input type = "text" class = "form-control" id = "handler" placeholder = "Your handler"/>
          <input type = "text" class = "form-control" id = "message" placeholder = "Your message here..."/>
          <button id = "btnSend">Send</button>
        </div><!--end col-lg-12-->
      </div><!--end row-->
    </div><!--end container-fluid-->
    <script>
    var messages = document.getElementById('messages');
    var feedback = document.getElementById('feedback');
    var handler = document.getElementById('handler');
    var message = document.getElementById('message');
    var btnSend = document.getElementById('btnSend');

    var socket = io.connect('http://localhost:4000');

    //Emit Events
    btnSend.addEventListener('click', function() {
      socket.emit('chat', {
        message: message.value,
        handler: handler.value
      });
      message.value = '';
    });

    message.addEventListener('keypress', function() {
      socket.emit('typing', handler.value);
    });

    //Event Listener
    socket.on('chat', function(data) {
      feedback.innerHTML = '';
      messages.innerHTML += '<p><strong>' + data.handler + '</strong>: ' + data.message + '</p>';
    });

    socket.on('typing', function(data) {
      feedback.innerHTML = '<p><em>' + data + '</em> is typing...</p>';
    });
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  </body>
</html>
