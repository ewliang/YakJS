<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  </head>
  <body>
    <div class = "">
      <div id = "feedback"></div><!--end feedback-->
      <div id = "messages">
      </div><!--end messages-->
      <input type = "text" id = "handler" placeholder = "Your handler"/>
      <input type = "text" id = "message" placeholder = "Your message here..."/>
      <button id = "btnSend">Send</button>
    </div>
    <script>
    var messages = document.getElementById('messages');
    var feedback = document.getElementById('feedback');
    var handler = document.getElementById('handler');
    var message = document.getElementById('message');
    var btnSend = document.getElementById('btnSend');

    var socket = io.connect('http://localhost:4000');

    //Emit Events
    btnSend.addEventListener('click', function() {
      socket.emit('chat', {
        message: message.value,
        handler: handler.value
      });
      message.value = '';
    });

    message.addEventListener('keypress', function() {
      socket.emit('typing', handler.value);
    });

    //Event Listener
    socket.on('chat', function(data) {
      feedback.innerHTML = '';
      messages.innerHTML += '<p><strong>' + data.handler + '</strong>: ' + data.message + '</p>';
    });

    socket.on('typing', function(data) {
      feedback.innerHTML = '<p><em>' + data + '</em> is typing...</p>';
    });
    </script>
  </body>
</html>
